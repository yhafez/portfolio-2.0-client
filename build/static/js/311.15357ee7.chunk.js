"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[311],{311:function(t,e,r){r.r(e),r.d(e,{a:function(){return j},e:function(){return m},s:function(){return P}});var n=r(2982),a=r(7762),o=r(1413),i=r(885),c=r(3246),u=/_key\s*==\s*['"](.*)['"]/;function l(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce((function(t,e,r){var n=typeof e;if("number"===n)return"".concat(t,"[").concat(e,"]");if("string"===n)return"".concat(t).concat(0===r?"":".").concat(e);if(function(t){return"string"==typeof t?u.test(t.trim()):"object"==typeof t&&"_key"in t}(e)&&e._key)return"".concat(t,'[_key=="').concat(e._key,'"]');if(Array.isArray(e)){var a=(0,i.Z)(e,2),o=a[0],c=a[1];return"".concat(t,"[").concat(o,":").concat(c,"]")}throw new Error("Unsupported path segment `".concat(JSON.stringify(e),"`"))}),"")}var s={"\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","'":"\\'","\\":"\\\\"},f={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t","\\'":"'","\\\\":"\\"};function p(t){for(var e,r=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;null!==(e=n.exec(t));)if(void 0===e[1])if(void 0===e[2])if(void 0===e[3]);else{var a=e[3].replace(/\\(\\')/g,(function(t){return f[t]}));r.push({_key:a,_index:-1})}else r.push(parseInt(e[2],10));else{var o=e[1].replace(/\\(\\|f|n|r|t|')/g,(function(t){return f[t]}));r.push(o)}return r}function d(t){return t.map((function(t){if("string"==typeof t||"number"==typeof t)return t;if(""!==t._key)return{_key:t._key};if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))}))}function h(t,e){if(null!=e&&e.mappings){var r=function(t){return"$".concat(t.map((function(t){return"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,(function(t){return s[t]})),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,(function(t){return s[t]})),"')]"):"[".concat(t._index,"]")})).join(""))}(t.map((function(t){if("string"==typeof t||"number"==typeof t)return t;if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))})));if(void 0!==e.mappings[r])return{mapping:e.mappings[r],matchedPath:r,pathSuffix:""};var n=Object.entries(e.mappings).filter((function(t){var e=(0,i.Z)(t,1)[0];return r.startsWith(e)})).sort((function(t,e){var r=(0,i.Z)(t,1)[0];return(0,i.Z)(e,1)[0].length-r.length}));if(0!=n.length){var a=(0,i.Z)(n[0],2),o=a[0];return{mapping:a[1],matchedPath:o,pathSuffix:r.substring(o.length)}}}}function g(t){return null!==t&&Array.isArray(t)}function y(t){return"object"==typeof t&&null!==t}function v(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return g(t)?t.map((function(t,n){if(y(t)){var a=t._key;if("string"==typeof a)return v(t,e,r.concat({_key:a,_index:n}))}return v(t,e,r.concat(n))})):y(t)?Object.fromEntries(Object.entries(t).map((function(t){var n=(0,i.Z)(t,2),a=n[0];return[a,v(n[1],e,r.concat(a))]}))):e(t,r)}function m(t,e,r){return v(t,(function(t,n){if("string"!=typeof t)return t;var a=h(n,e);if(!a)return t;var o=a.mapping,i=a.matchedPath;if("value"!==o.type||"documentValue"!==o.source.type)return t;var c=e.documents[o.source.document],u=e.paths[o.source.path],l=p(i),s=p(u).concat(n.slice(l.length));return r({sourcePath:s,sourceDocument:c,resultPath:n,value:t})}))}var k="drafts.";function b(t){var e=t.baseUrl,r=t.workspace,n=void 0===r?"default":r,a=t.tool,o=void 0===a?"default":a,i=t.id,c=t.type,u=t.path,s=t.projectId,f=t.dataset;if(!e)throw new Error("baseUrl is required");if(!u)throw new Error("path is required");if(!i)throw new Error("id is required");if("/"!==e&&e.endsWith("/"))throw new Error("baseUrl must not end with a slash");var p="default"===n?void 0:n,h="default"===o?void 0:o,g=function(t){return t.startsWith(k)?t.slice(k.length):t}(i),y=Array.isArray(u)?l(d(u)):u,v=new URLSearchParams({baseUrl:e,id:g,type:c,path:y});p&&v.set("workspace",p),h&&v.set("tool",h),s&&v.set("projectId",s),f&&v.set("dataset",f),i.startsWith(k)&&v.set("isDraft","");var m=["/"===e?"":e];p&&m.push(p);var b=["mode=presentation","id=".concat(g),"type=".concat(c),"path=".concat(encodeURIComponent(y))];return h&&b.push("tool=".concat(h)),m.push("intent","edit","".concat(b.join(";"),"?").concat(v)),m.join("/")}var w=function(t){var e,r=t.sourcePath,n=t.resultPath,a=t.value;if(/^\d{4}-\d{2}-\d{2}/.test(e=a)&&Date.parse(e)||function(t){try{new URL(t,t.startsWith("/")?"https://acme.com":void 0)}catch(e){return!1}return!0}(a))return!1;var o=r.at(-1);return!("slug"===r.at(-2)&&"current"===o||"string"==typeof o&&o.startsWith("_")||"number"==typeof o&&"marks"===r.at(-2)||"href"===o&&"number"==typeof r.at(-2)&&"markDefs"===r.at(-3)||"style"===o||"listItem"===o||r.some((function(t){return"meta"===t||"metadata"===t||"openGraph"===t||"seo"===t}))||U(r)||U(n)||"string"==typeof o&&_.has(o))},_=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","unit","url","username","variant","website"]);function U(t){return t.some((function(t){return"string"==typeof t&&null!==t.match(/type/i)}))}function P(t,e,r){var i,l,s,f,p,d,h,g,y,v=r.filter,k=r.logger;if(!r.enabled){var _="config.enabled must be true, don't call this function otherwise";throw null==(i=null==k?void 0:k.error)||i.call(k,"[@sanity/client]: ".concat(_),{result:t,resultSourceMap:e,config:r}),new TypeError(_)}if(!e)return null==(l=null==k?void 0:k.error)||l.call(k,"[@sanity/client]: Missing Content Source Map from response body",{result:t,resultSourceMap:e,config:r}),t;if(!r.studioUrl){var U="config.studioUrl must be defined";throw null==(s=null==k?void 0:k.error)||s.call(k,"[@sanity/client]: ".concat(U),{result:t,resultSourceMap:e,config:r}),new TypeError(U)}var P={encoded:[],skipped:[]},j=m(t,e,(function(t){var e=t.sourcePath,n=t.sourceDocument,a=t.resultPath,i=t.value;if(!1===("function"==typeof v?v({sourcePath:e,resultPath:a,filterDefault:w,sourceDocument:n,value:i}):w({sourcePath:e,resultPath:a,filterDefault:w,sourceDocument:n,value:i})))return k&&P.skipped.push({path:E(e),value:"".concat(i.slice(0,20)).concat(i.length>20?"...":""),length:i.length}),i;k&&P.encoded.push({path:E(e),value:"".concat(i.slice(0,20)).concat(i.length>20?"...":""),length:i.length});var u=function(t){var e="string"==typeof t?t:t.baseUrl;return"/"!==e&&(e=e.replace(/\/$/,"")),"string"==typeof t?{baseUrl:e}:(0,o.Z)((0,o.Z)({},t),{},{baseUrl:e})}("function"==typeof r.studioUrl?r.studioUrl(n):r.studioUrl),l=u.baseUrl,s=u.workspace,f=u.tool;if(!l)return i;var p=n._id,d=n._type,h=n._projectId,g=n._dataset;return(0,c.g)(i,{origin:"sanity.io",href:b((0,o.Z)({baseUrl:l,workspace:s,tool:f,id:p,type:d,path:e},!r.omitCrossDatasetReferenceData&&{dataset:g,projectId:h}))},!1)}));if(k){var S=P.skipped.length,x=P.encoded.length;if((S||x)&&(null==(f=(null==k?void 0:k.groupCollapsed)||k.log)||f("[@sanity/client]: Encoding source map into result"),null==(p=k.log)||p.call(k,"[@sanity/client]: Paths encoded: ".concat(P.encoded.length,", skipped: ").concat(P.skipped.length))),P.encoded.length>0&&(null==(d=null==k?void 0:k.log)||d.call(k,"[@sanity/client]: Table of encoded paths"),null==(h=(null==k?void 0:k.table)||k.log)||h(P.encoded)),P.skipped.length>0){var D,Z=new Set,A=(0,a.Z)(P.skipped);try{for(A.s();!(D=A.n()).done;){var I=D.value.path;Z.add(I.replace(u,"0").replace(/\[\d+\]/g,"[]"))}}catch(O){A.e(O)}finally{A.f()}null==(g=null==k?void 0:k.log)||g.call(k,"[@sanity/client]: List of skipped paths",(0,n.Z)(Z.values()))}(S||x)&&(null==(y=null==k?void 0:k.groupEnd)||y.call(k))}return j}function E(t){return l(d(t))}var j=Object.freeze({__proto__:null,stegaEncodeSourceMap:P})}}]);
//# sourceMappingURL=311.15357ee7.chunk.js.map